<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"> </script> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]} }); </script>

# 经典智能体范式

[ReAct](#react)、[Plan-and-Solve](#plan-and-solve)、[Reflect](#reflection)

<div align='center'>
<img src="../images/c1/比较.png" alt="比较" width="400">
</div>

## ReAct

<div align='center'>
<img src="../images/c1/react.png" alt="react" width="400">
</div>

将推理和行动显式的结合起来，形成一个“思考-行动-观察”的循环。

* **Thought（思考）**：智能体的内心独白，分析情况，分解任务，指定计划。

* **Action（行动）**：智能体采取的具体动作，通常是调用一个外部工具。

* **Observation（观察）**：执行Action后从外部工具返回的结果。

智能体不断重复 **Thought->Action->Observation** 的循环，在每个时间步 $t$  ,智能体 $\pi$ 根据初始问题 $q$ 和之前所有的“行动-观察”轨迹 $((a_1,o_t),\ldots,(a_{t-1},o_{t-1}))$ 来生成当前的思考 $th_t$ 和行动 $a_t$ ，并由工具 $T$ 执行得到观察 $o_t$

$$
(th_t,a_t)=\pi(q,(a_1,o_1),\ldots,(a_{t-1},o_{t-1})) \\
o_t=T(a_t)
$$

## Plan-and-Solve

<div align='center'>
<img src="../images/c1/planandsolve.png" alt="planandsolve" width="400">
</div>

先规划后执行

* **规划阶段(Planing Phase)**: 智能体接收用户完整问题，将问题分解，并指定一个清晰、分步骤的行动计划。

* **执行阶段(Solving Phase)**: 智能体严格按照计划中的步骤逐一执行，每一步的执行可能是独立的llm调用，可能是对上一步结果的加工处理，每一步的执行依赖于前面每步的执行结果。

首先规划模型 $\pi_{plan}$ 根据原始问题 $q$ 生成包含 $n$ 个步骤的计划 $P=(p_1,p_2,\ldots,p_n)$ , 最后在执行阶段， $\pi_{solve}$ 注意完成计划中的步骤。对于第 $i$ 个步骤，其解决方案 $s_i$ 的生成同时依赖于原始问题 $q$ ，完整计划 $P$ 以及之前所有步骤的执行结果 $(s_t,\ldots,s_{i-1})$ :

$$
P=(p_1,p_2,\ldots,p_n)=\pi_{plan}(q) \\
s_i=\pi_{solve}(q,P,(s_1,\ldots,s_{i-1}))
$$

最终的答案就是最后一个步骤的结果 $s_n$

## Reflection

<div align='center'>
<img src="../images/c1/reflect.png" alt="reflect" width="400">
</div>

三步循环:执行-> 反思 -> 优化

1. **执行(Execution)**: 智能体用某种方法(ReAct,Plan-and-Solve) 尝试完成任务，生成一个初步的解决方案或行动轨迹。

* **反思(Reflection)**: 调用一个独立的，或带有特殊prompt 的llm实例作为评论员，从多角度评估审视上一步的解决方案，得到该方案的反馈。

* 优化：智能体将解决方案＋反馈作为新的上下文，再次调用llm，要求根据反馈内容进行优化。

假设 $O_i$ 是第i次迭代的输出( $O_0$ 为原始输出)，反思模型 $\pi_{reflet}$ 针对 $O_i$ 生成反馈 $F_i$ ，优化模型结合原始任务、上一般输出以及反馈，生成新一版输出 $O_{i+1}$ :

$$
F_i=\pi_{reflect}(Task,O_i) \\
O_{i+1}=\pi(refine)(Task,O_i,F_i)
$$